<!DOCTYPE html>
<html>
	<head>
		<style>
			body {
				margin: 0;
			}

			h1 {
				text-align: center;
			}

            h2 {
                margin: 0;
                text-decoration: underline;
                height: fit-content;
            }
            h2 a {
                display: block;
                margin-top: 10px;
                margin-bottom: 5px;
            }

			div {
				margin: auto;
				max-width: fit-content;
			}
			.info {
				background-color: #ccf;
				border: 1px solid #bbd;
				padding: 16px 1em;
				margin-top: 5px;
				margin-bottom: 1em;
                max-width: 612px;
			}

            p {
                margin: 0;
                text-indent: .5cm;
                line-height: 1.15;
            }

            span {
                font-family: monospace;
                color: #188038;
                font-size: 1.15em;
                line-height: 0;
            }

            table {
                margin-left: .5cm;
                border-collapse: collapse;
            }
            td {
                vertical-align: top;
                padding: 0;
            }

            sub {
                line-height: 0;
                font-size: .7em;
            }

			button {
				font-size: 20px;
				margin: 5px 0;
				background-color: #c693ff;
				cursor: pointer;
				border-width: 0;
				pointer-events: initial;
				padding: 4px;
			}
			.menu-button {
				min-width: 20vw;
				background-color: #00e48c;
			}
			.menu-button:hover {
				background-color: #19c281;
			}
			.menu-button:active {
				background-color: #0c8255;
			}
		</style>
	</head>
	<body>
		<div id="menu" style="float: right; margin-right: 10px; width: fit-content">
			<button class="menu-button" onclick="setLocation('/');">Home</button>
			<button class="menu-button" onclick="setLocation('/tutorial')">Tutorial</button>
			<button class="menu-button" style="cursor: auto; background-color: #19c281;">Documentation</button>
			<script>
				function setLocation(url) {
					let href = window.location.href;
					let prefix = href.split(/(?<!(\/))\/(?!(\/))/)[0];
					let suffix = "";
					if (href.startsWith("https://phonetics.ling.udel.edu"))
						prefix = "https://phonetics.ling.udel.edu";
					if (href.startsWith("file:///")) {
						prefix = href.split("/").slice(0,-1).join("/");
						suffix = ".html";
						if (url === "/") url = "/index"
					}
					if (href.startsWith("https://codebodger.github.io/IPA_Keyboard_Website"))
						prefix = "https://codebodger.github.io/IPA_Keyboard_Website";
					
					location.assign(prefix + url + suffix);
				}
			</script>
		</div><br><br>

        <div class="info">
            <h2>Definitions</h2>
            <table>
                <tr><td>Key&#8209;code:&nbsp;    </td><td>the three digit<sub>10</sub> (000-164) code representing a single IPA character</td></tr>
                <tr><td>Key&#8209;byte:&nbsp;    </td><td>the key-code as a single byte (typically implicitly casted to <span>int</span>)</td></tr>
                <tr><td>Long&#8209;code:&nbsp;   </td><td>the 18 digit<sub>64</sub> code to indicate which client a key-byte needs to be sent to</td></tr>
                <tr><td>Linking&#8209;code:&nbsp;</td><td>the six digit<sub>10</sub> code to get the long-code from <a href="#router">Router Server</a> to <a href="#website">Website</a></p></td></tr>
            </table>
            <h2 id="website"><a href="https://github.com/codeBodger/IPA_Keyboard_Website">IPA Keyboard Website</a></h2>
            <p>This is the Website that users will use to type.&nbsp; After inputting the linking-code generated by the <a href="#client">Client</a> into the login page of this website on their secondary device, the user can tap/click the buttons on the chart to type the characters.&nbsp; If the user inputs an invalid linking-code, they are alerted.&nbsp; After the linking-code is input successfully, the long-code that was generated when the <a href="#client">Client</a> was run is sent from the <a href="#router">Router Server</a> to this Website, completing the linking.&nbsp; </p>
            <p>If the user does not have a secondary device, they can also copy and paste the symbols directly from this Website.&nbsp; </p>
            <p>When the user presses a button (and is logged in), this Website sends data containing the key-code for the button pressed and the long-code to the <a href="#backend">Backend</a>.&nbsp; If the user is not &ldquo;logged in&rdquo;, this will not be sent, so as not to send unnecessary data.</p>
            <p>Whenever any data is sent from this Website, it is prepended by a string describing the activity, which the <a href="#backend">Backend</a> uses to determine what to do with the data (either treat it like a linking-code or like a key-code followed by a long-code).&nbsp; The activity is separated from the data with a backslash.&nbsp; </p>
            <h2 id="backend"><a href="https://github.com/codeBodger/IPA_Keyboard_Website_Backend">IPA Keyboard Website Backend (Python)</a></h2>
            <p>This Backend, written in Python, is really just a way for the <a href="#website">Website</a> to communicate with the <a href="#router">Router Server</a>.&nbsp; </p>
            <p>To make this work with Apache, it had to be almost entirely rewritten, as Apache is already running the server, so there is instead a Python script that is POSTed to.&nbsp; </p>
            <p>This Backend is really quite simple.&nbsp; It just takes the data it gets from POST from the <a href="#website">Website</a> and sends it to the <a href="#router">Router Server</a>, prepended with a single byte indicating the activity.&nbsp; When the activity is to send which character to type, it converts the key-code to the key-byte first.&nbsp; </p>
            <p>This Backend also handles passing response codes from the <a href="#router">Router Server</a> to the <a href="#website">Website</a>.&nbsp; These are used to ensure that everything is working properly and to alert the user if something went wrong, so they can either resolve the problem or contact me about it.&nbsp; </p>
            <h2 id="router"><a href="https://github.com/codeBodger/IPA_Keyboard_Router_Server">IPA Keyboard Router Server (Java)</a></h2>
            <p>This Server, written in Java, handles actually sending data and confirmations to and from the <a href="#client">Client</a>.&nbsp; When it is sent data from the <a href="#backend">Website Backend</a> (which got the data from the <a href="#website">Website</a>), and splits it into the key-byte and the long-code corresponding to the specific <a href="#client">Client</a>.&nbsp; The long-code is looked up in a dictionary of clients, and the proper client is sent the byte.&nbsp; If such a request is not sent for an hour, the client is removed from the dictionary, to ensure that there is not a memory leak.&nbsp; </p>
            <p>Depending on what this Router Server is sent and from where it will do different things.&nbsp; It will give the <a href="#backend">Backend</a> the long-code for a given linking-code when requested, or it will pass on the key-byte.&nbsp; Either way, it sends a response (and sometimes additional information) back to the <a href="#client">Client</a> (and <a href="#backend">Backend</a> when that was the origin of the request) indicating the degree of success.&nbsp; </p>
            <h2 id="client"><a href="https://github.com/codeBodger/IPA_Keyboard_Client_with_Robot">IPA Keyboard Client with Robot</a></h2>
            <p>The computer side Client, written in Python, takes the key-byte it gets from the <a href="#router">Router Server</a> and gets the corresponding character from a list.&nbsp; The client uses <span>pynput</span> to inject the IPA character as if from the keyboard.&nbsp; </p>
            <p>The client displays a button to stop it, and when it has been disconnected, a button to renew the connection.&nbsp; It also displays text indicating what&rsquo;s going on (connected, linked, the linking-code when necessary, the key-code and corresponding character that was most recently typed).&nbsp; Finally, it displays another button to get additional linking-codes for if the user wishes to link multiple secondary devices with the <a href="#website">Website</a> loaded on them at once.&nbsp; </p>
        </div>
    
		<div class="info">
			<div class="text">
				Queries and comments can be directed to <a id="email" href="/">rnackerm+ipa@udel.edu</a>
				<script>
					document.getElementById("email").setAttribute("href", "mailto:rnackerm+ipa@udel.edu");
				</script>
			</div>
		</div>

		<div>Â© 2024 by <a href="https://github.com/codeBodger">Rowan Ackerman</a></div>
	</body>
</html>
